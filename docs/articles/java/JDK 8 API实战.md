---
title: JDK 8 API实战
description: 涵盖接口默认方法限制、常用函数式接口、Stream 流操作核心机制及 Map 新特性。
---
# JDK 8 核心技术实战指南

本篇文档基于 JavaGuide 内容进行深度整理，旨在提炼 JDK 8 中最关键的工程实践点，特别是 Lambda 限制、函数式接口及 Stream 流的生命周期。

------

## 1. 接口默认方法 (Default Methods)

JDK 8 允许在接口中通过 `default` 关键字定义具体实现，但在 **Lambda 表达式** 中存在访问限制。

::: danger 访问限制

Lambda 表达式无法访问接口的默认方法。 虽然匿名内部类可以访问 default 方法，但 Lambda 被设计为函数式接口的实现，它无法感知接口内部的默认方法逻辑。

:::

------

## 2. 核心函数式接口

### 2.1 Predicate (断言型)

接受一个参数，返回 `boolean` 值。

- **核心用途**：逻辑过滤、条件判断。
- **组合方法**：支持 `and`、`or`、`negate`（非）进行逻辑组合。

### 2.2 Function (函数型)

接受一个参数，并产生一个结果。

- **核心用途**：数据类型转换、逻辑处理。
- **链接操作**：使用 `compose` 或 `andThen` 将多个函数串联。

------

## 3. Stream 流式操作规范

Stream 操作分为 **中间操作 (Intermediate)** 和 **最终操作 (Terminal)**。

### 3.1 核心操作分类

| **操作类型** | **常见方法**                           | **特点**                                          |
| ------------ | -------------------------------------- | ------------------------------------------------- |
| **中间操作** | `filter`, `map`, `sorted`              | 返回 Stream，支持链式调用，具有**延迟执行**特性。 |
| **最终操作** | `forEach`, `collect`, `match`, `count` | 触发实际计算，执行后 Stream 被关闭。              |

### 3.2 排序 (Sorted)

sorted 是一个中间操作。

::: tip 注意事项

排序操作只会产生一个新的已排序流，不会修改原始数据源（如 List 集合）。

:::

### 3.3 匹配 (Match)

用于检测 Stream 是否符合特定 Predicate 条件，属于终止操作，返回 `boolean`。

- `anyMatch`: 只要有一个元素匹配。
- `allMatch`: 所有元素都匹配。
- `noneMatch`: 没有元素匹配。

------

## ⚠️ 4. Stream 的生命周期：一次性消费

Stream 被设计为 **单遍 (Single-pass)** 处理。

::: danger IllegalStateException

一旦执行了终止操作，该 Stream 即被视为已消耗（Consumed），无法再次使用。

- **底层机制**：基于 `Spliterator`（可分割迭代器），遍历完成后状态变为“已耗尽”。

- 并行流 (Parallel Streams)：利用多线程提升效率，内部通过 ForkJoinPool 分解任务。

  :::

------

## 5. Map 增强 API 机制

JDK 8 对 `Map` 接口进行了大幅增强，提供了更原子化的操作方式。

### 5.1 条件操作

- **`remove(key, value)`**：只有当 `key` 存在且 `value` 完全匹配时才执行删除。

### 5.2 计算函数 (Compute)

| **方法**               | **触发条件**          | **行为**                                                         |
| ---------------------- | --------------------- | ---------------------------------------------------------------- |
| **`computeIfAbsent`**  | 键不存在或值为 `null` | 计算新值并存入，常用于**初始化集合**（如 `Map<String, List>`）。 |
| **`computeIfPresent`** | 键存在且值不为 `null` | 计算并更新旧值。若计算结果为 `null`，则移除该键。                |

------